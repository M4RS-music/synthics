<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width-device-width, initial-scale=1">
	<title>synthics</title>
</head>

<body>
	<header>
	</header>
	<div class="wrap">
		<canvas id="scene" width="300" height="300" style="border-bottom-width: 1px;border-bottom-style: solid;border-left-width: 1px;border-left-style: solid;border-top-width: 1px;border-top-style: solid;border-right-width: 1px;border-right-style: solid;"></canvas>
	</div>

	<script>
		//GLOBAL VARIABLES
		var canvas, ctx, width, height, boxes = [], balls = [], numberBalls, drag, friction, bounce, gravity;
		numberBalls = 1;
		bounce = 0.9;
		gravity = -0.2;
		
		//OBJECTS
		function Ball(rad, x, y, vx, vy, color){
			this.rad = rad;
			this.x = x;
			this.y = y;
			this.vx = vx;
			this.vy =vy;
			this.color = color;
			this.update = function(){
				if(this.x-this.rad <= 0 || this.x+this.rad >= width) this.vx = collide(this.vx);
				if(this.y-this.rad <= 0 || this.y+this.rad >= height) this.vy = collide(this.vy);
				
				this.vy -= gravity; 
				
				if(this.x-this.rad+15 >= 0 && this.x+this.rad-15 <= width) this.x += this.vx; //trying to prevent ball from going outside border even partially
				if(this.y-this.rad+15 >= 0 && this.y+this.rad-15 <= height) this.y += this.vy;
				
				//console.log("update");

			}
			this.render = function(ctx){
				ctx.beginPath();
				ctx.fillStyle = this.color;
				ctx.arc(this.x, this.y, this.rad, 0, Math.PI * 2);
				ctx.closePath();
				ctx.fill();
				//console.log("render");
			}
		}
		
		//FUNCTIONS
		function clear(){
			ctx.clearRect(0,0,width,height);
		}
		
		function game(){
			clear();
			for(var i=0; i<numberBalls; i++){
				var b = balls[i];
				b.update();
				b.render(ctx);
			}
			
		}
		function collide(v){ //calculates the velocity/spin resulting from a collision
			return -v * bounce;
		}
		//INIT
		document.addEventListener("DOMContentLoaded", function(){
			canvas = document.getElementById("scene");
			ctx = canvas.getContext("2d");
			width = canvas.width;
			height = canvas.height;
			for(var i=0; i<numberBalls; i++){
				var rad = 25;
				var x = width/2;
				var y = height/2;
				var vx = 15; //pixels per tick velocity
				var vy = 10;
				var color = "rgb(200, 0, 30)";
				balls.push(new Ball(rad, x, y, vx, vy, color))
			}
			console.log(balls);
			setInterval(game, 30);
		})
	</script>
</body>

</html>
