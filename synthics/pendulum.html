<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width-device-width, initial-scale=1">
	<title>synthics pendulum</title>
</head>

<body>
	<header>
	</header>
	<div class="wrap">
		<canvas id="scene" width="300" height="300" style="border-bottom-width: 1px;border-bottom-style: solid;border-left-width: 1px;border-left-style: solid;border-top-width: 1px;border-top-style: solid;border-right-width: 1px;border-right-style: solid;"></canvas>
	</div>

	<script>
		//GLOBAL VARIABLES
		var canvas, ctx, width, height, magnets = [], dampening, bounce, gravity, pend;
		bounce = 0.65;
		gravity = -3;
		dampening = 0.9;

		//OBJECTS
		function Pendulum(x, y, len){
	    this.origin = [x, y];
	    this.position = [];
	    this.len = len;
	    this.angle = Math.PI / 4;
	    this.v = 0.0;
	    this.a = 0.0;
	    this.rad = 25;


		  this.update = function(){
		    this.a = (gravity / this.len) * Math.sin(this.angle);
		    this.v += this.a;
		    this.v *= dampening;
		    this.angle += this.v;
				this.position = [this.len * Math.sin(this.angle), this.len * Math.cos(this.angle)];
				this.position[0] += this.origin[0];
				this.position[1] += this.origin[1];
		  }

		  this.render = function(ctx){
				ctx.beginPath();
				ctx.arc(this.origin[0], this.origin[1], 3, 0, Math.PI * 2);
				ctx.fillStyle = "black";
				ctx.closePath();
				ctx.fill();

				ctx.beginPath();
				ctx.moveTo(this.origin[0], this.origin[1]);
				ctx.lineTo(this.position[0], this.position[1]);
				ctx.stroke();
				ctx.closePath();

		   		ctx.beginPath();
			 	ctx.arc(this.position[0], this.position[1], this.rad, 0, Math.PI * 2);
				ctx.fillStyle = "rgba(200, 0, 90, 0.5)";
				ctx.strokeStyle = "black";
				ctx.closePath();
				ctx.fill();
		  }
	}



		//FUNCTIONS
		function clear(){
			ctx.clearRect(0,0,width,height);
		}

		function game(){
			clear();
			pend.update();
			pend.render(ctx);
			console.log(pend);

		}

		function getDistance(x1, y1, x2, y2){
			var xD = x1-x2;
			var yD = y1-y2;
			return Math.sqrt((xD * xD)+(yD * yD));
		}

		function randIntRange(min, max){
			return Math.floor(Math.random() * (max - min +1) +min);
		}

		//INIT
		document.addEventListener("DOMContentLoaded", function(){
			canvas = document.getElementById("scene");
			ctx = canvas.getContext("2d");
			width = canvas.width;
			height = canvas.height;
			pend = new Pendulum(150, 20, 200);

			setInterval(game, 20);
		})
	</script>
</body>

</html>
